# 第十九章 正则表达式

概念：一套用来匹配字符串的规则 

- 第一种写法 双斜杠写法

  ```javascript
  var reg = /abc/;  -->匹配字符串abc
  ```

- 第二种写法 new RegExp(变量)

  当正则里面的内容 需要用到变量时,我们需要使用这种写法

  ```javascript
  var x = "abc";
  var reg = new RegExp(x); --->无论字符串内容怎么变都可以匹配
  ```

## 19.1 正则方法的使用

- test方法的使用

  正则.test(字符串) -->检测str里面有没有reg规则，有则返回true，没有则返回false

  ```javascript
  let a = /abc/;
  console.log(a.test("123abc12334"));//true
  ```

- 字符串.match(正则)  -->将匹配成功的内容整合成数组返回,匹配不成功则返回null

  ```javascript
  var str = "asasdfadf"
  var reg = /fa/
  console.log(str.match(reg))
  ```

- 字符串.replace(正则,替换的内容)

  将匹配到的内容替换,替换的内容可以使字符串,也可以是带return的函数

## 19.2 \ 符号  -->转义符号  结合某些字母而表现出特殊意义

1. \d  一个数字字符
2.  \D  一个非数字字符
3.  \s  一个空格字符串 \tab符号等等会产生空格的
4.  \S  一个非空格字符
5.  \w  一个( 字母  数字  _ ) 字符
6.  \W  一个非( 字母 / 数字 / _ ) 字符
7. \b  一个单词边界/连词符(单词边界:起始位置 空格 以及所有除了\w之外的的字符都可以构成单词边界 )  匹配英文单字
8. \B  一个非单词边界
9. \
   - 把一个具有特殊意义的字符变得没有特殊意义
   - 和一些单词结合有换行或者制表符的意思
     -  \n(换行) \r(换行) \t(制表符)

## 19.3 数量词

1. `+`大于等于1，尽可能多的匹配
2. `?` 0或者1
3. `*`至少0
4.  `[n,m] ` 最少有n个 最多有m个 常规数量词写法，n和m都是自然数，n<m
5. `[n,] `n到无穷大
6. `[n] `必须n个

- 针对于数量词的贪婪 和 惰性:
  - 写法：量词 + ?
  - 贪婪：全部吃完再才能够最后一次吐出匹配
  - 惰性：从满足规则开始一个一个吃并匹配

- 量词	{ }

  特性:默认贪婪

  量词后面+?就成了惰性

  - {n} 	n个
  - {n,m}	n~m包含n也包含m
  - {n,}	n~无穷大,包含n

  几个特殊量词有专属的符号代替：

  - {1,+}(1到无穷大)	`+`默认贪婪匹配
  - {0,}(0到无穷大)	`*`
  - {0,1}(匹配0个或1个)	`?`默认惰性匹配

  ```javascript
  let a = /\d{2,4}/; 匹配四位
  let s = "456789"
  console.log(s.match(a));//4567
  ```

  ```javascript
  let a = /\d{2,4}?/; 
  let s = "456789"
  console.log(s.match(a));//45
  ```

- 子项 ( )	拿到一串字符串中所需要提取出来的

  ```javascript
  let a = /阿飞(\d{11})/; 
  let s = "阿飞:12345678911"
  console.log(s.match(a));//["阿飞:12345678911","12345678911"]
  ```

- | 或者

  ```javascript
  let a = /abc | edg/g;全局匹配abc或edg
  ```

## 19.4 修饰词 

可以多个放在一起

1. `i`	不区分大小写

2. `g`	全局匹配，匹配成功不会结束，直到最末尾才会结束

3. `m`	换行匹配

   ```javascript
   var str = "aaaaaaaasdD"
   var reg = /a/ig
   ```

## 19.5 自定义匹配

自定义能够匹配 '多种字符' 的表达式

  使用方括号 [ ] 包含一系列字符，能够匹配其中任意一个字符。用 [^ ] 包含一系列字符，则能够匹配其中字符之外的任意一个字符。同样的道理，虽然可以匹配其中任意一个，但是只能是一个，不是多个。

| 表达式    | 可匹配                                  |
| --------- | --------------------------------------- |
| [ab5@]    | 匹配 "a" 或 "b" 或 "5" 或 "@"           |
| [^abc]    | 匹配 "a","b","c" 之外的任意一个字符     |
| [f-k]     | 匹配 "f"~"k" 之间的任意一个字母         |
| [^A-F0-3] | 匹配 "A"~"F","0"~"3" 之外的任意一个字符 |

## 19.6字符集[ ]

 [ ]   --->数字或者字母的范围   默认匹配一个字符

区间可以拆分eg: [0-9]  [a-z]  [A-Z]

```javascript
var reg = /[2-8]{2}/g
var str = "123456789";
console.log(str.match(reg))
```

- **或者** 的意思
  	let reg = /[abc0-9]/g;//或者匹配a,或者匹配b,或者匹配c,和0-9

-   **除了** 的意思

  ```javascript
  var reg = /[^abc]/g; -->除了abc   ^字符只能写在第一位 ,整个字符集就是"除了"的意思;  注意 放在字符集里面是这个意思,放在外面是起始位置的意思
  var str = "123456789";
  console.log(str.match(reg));
  ```

## 19.7 子集 ()

```javascript
var reg = /(ab)+/
var str = "abcab";
console.log(str.match(reg))
```

## 19.8 整体或者： |

```javascript
//var reg = /abc|d/   --->abc 或者 d
var reg = /ab(c|s)/   --->abc 或者 abs
var str = "abasd";
console.log(str.match(reg))
```

## 19.9 一些特殊意思的字符

- `.` 匹配任意字符,除了换行符之外,[.]的.是单纯的匹配字符
- `^` 匹配位置 在[]内是 "除了" 的意思 在[]外则匹配起始的位置
- `&` 匹配结束位置而不是字符

## 19.10 常见的正则

```javascript
QQ号：var qq = /^[1-9]\d{4,9}$/

手机号：var tel /^1[3-9]\d{9}$/

用户名：var user = /^[a-z]\w{5,17}$/i

密码：var pwd = /^[\w\-\<>,.>/+*=)([{}:'''&^%$#@!`~]{6,18}$/

邮箱：var mail = /^[1-9a-z]\w{0,17}@[0-9a-z]{2,}(\.[a-z]{2,4}){1,2}$/i

身份证:var IDCard : /^[1-9]\d{5}(18|19|20)\d{2}(((0[13578]|1[02])(0[1-9]|[12][0-9])|3[01])|((0[469]|11)(0[1-9]|[12][0-9])|30)|(02(0[1-9]|[12][0-9])))\d{3}[0-9x]$/i
```